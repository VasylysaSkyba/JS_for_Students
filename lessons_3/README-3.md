Урок 3. Цикли. Опції.

Цикли
------
Під час написання скриптів Ви можете зіткнутися із проблемою виконання
однотипної дії багато разів.
Наприклад, потрібно перебрати цифри поспіль та виконати до кожного однаковий
код.
Однак для полегшення роботи були створені цикли. Вони позбавляють від
повторення однієї ділянки коду багато разів.

Цикл while
-----------

Перший цикл, про який йтиметься – while. Він виглядає так:
1. while (умова) {
2. // код, тіло циклу
3. }
Поки умова вірна, код із тіла циклу виконуватиметься.
Наприклад, цикл нижче виводить i доки i < 3:
1. var i = 0;
2. while (i <) {
3. alert(i);
4. i++;
5. }
Повторення циклу у науці називають «ітерацією». Цикл у прикладі вище
робить три ітерації.
Теоретично цикл міг би виконуватися вічно, якби в прикладі вище не було б i++
Однак, на практиці, можна помітити, що при «завислому» скрипті, браузер
виведе повідомлення про це, а потім відвідувач зупинить його.
Якщо Вам потрібен нескінченний цикл, то це можна зробити і простіше:
1. while (true) {
2. // ...
3. }

Цикл for
---------

У роботі найчастіше зустрічається цикл for:
1. for (початок; умова; крок) {
2. // ... тіло циклу ...
3. }
Приклад циклу, який виконує alert(i) для i від 0 до 2 включно (до 3):
1. var i;
2.
3. for (i = 0; i < 3; i++) {
4. alert (i);
5. }
У прикладі:
• початок: i = 0;
• умова: i<3;
• крок: i++;
• тіло: alert(i); код у ньому поміщений у фігурні дужки. Однак код не
обов'язково поміщати в дужки, якщо потрібно виконати лише одну
операцію.
Виконується цикл так:
• початок: i = 0 - виконується один раз, відразу при заході в цикл;
• умова: i<3 – перевіряється перед кожною ітерацією та при вході в цикл; якщо
умова порушена, відбувається вихід;
• тіло: alert(i);
• крок: i++ – виконується після тіла кожної ітерації, але перед перевіркою
умови;
• перехід до кроку 2.
Іншими словами, потік виконання виглядає так: початок → (умова → тіло →
крок) → (умова → тіло → крок) → … продовжується виконання доти, доки
умова правильна.

Функції
-------

Іноді доводиться перевіряти одну і ту ж дію в окремих частинах
програми.
Наприклад, потрібно виводити повідомлення під час вітання відвідувача, при
виході з сайту і ще десь.
Щоб не повторювати той самий код у багатьох місцях, були придумані
функції. Саме вони є основними «будівельними блоками» будь-якої
програми.
Ви вже знаєте приклади вбудованих функцій. Це alert (message), prompt
(message, default) та confirm (question). Однак зручно те, що можна створювати та
свої власні функції.

Оголошення
-----------

Приклад функції:
1. function showMessage() {
2. alert («Привіт, друзі!»);
3. }
У першому прикладі можна побачити ключове слово function, після нього – ім'я
функції, потім список параметрів у дужках (у прикладі вище він порожній) та тіло
функції – код, який виконується під час її виклику.

Оголошена функція доступна на ім'я, наприклад:
1. function showMessage() {
2. alert («Привіт, друзі!»);
3. }
4.
5. showMessage();
6. showMessage();
Наведений вище код виведе повідомлення двічі. У цьому полягає основна мета
функцій: вони призначені для позбавлення від повторення одного і того ж
коду.
Якщо потрібно змінити повідомлення або спосіб його виведення – достатньо внести ці
зміни до функції, яка виводить його.

Локальні змінні
----------------

Функція може містити локальні змінні передані через var. Ці
змінні можна побачити лише всередині функції:
1. function showMessage() {
2. var message = 'Привіт, я – Олег!'; // локальна змінна
3.
4. alert (message);
5. }
6.
7. showMessage (); // 'Привіт, я – Олег!'
8. alert (message); // <- буде помилка, т.к. змінна видно тільки
всередині

Зовнішні змінні
----------------

Функція, у випадках, може звернутися до зовнішньої змінної.
Наприклад:
1. var userName = 'Олег';
2.
3. function showMessage() {
4. var message = 'Привіт, я' + username;
5. alert (message);
6. }
7.
8. showMessage (); // 'Привіт, я – Олег!'
Звернемо увагу на те, що тут можливе не лише читання, а й запис
даних. Але пам'ятайте про те, що ця змінна зовнішня, а все
модифікації будуть видно і зовні функції:
1. var userName = 'Олег';
2.
3. function showMessage() {
4. username = 'Ваня'; // (1) присвоєння у зовнішню змінну
5.
6. var message = 'Привіт, я' + userName;
7. alert (message);
8. }
9.
10. showMessage();
11.
12. Alert (userName); //Ваня, значення зовнішньої змінної
змінено функцією
Звернемо увагу на те, що якби у функції розміщувалася локальна
змінна var userName, всі звернення брали її за основу.
Відповідно, зовнішня змінна залишилася б незмінною.

Параметри
----------

Під час виклику функції можна передати їй певну інформацію,
яку та може використовувати як їй буде потрібно.
Наприклад, цей код виводитиме два повідомлення:
1. function showMessage (from, text) { // Параметри from, text
2.
3. from = "**" + from + "**"; // тут може бути складний код
оформлення
4.
5. alert (from + ':' + text);
6. }
7.
8. showMessage (Оля, Привіт!);
9. showMessage (Оля, Як справи?);

Повернення значення
--------------------

Завдяки функції ми можемо повернути будь-який результат. Після повернення
цей результат буде переданий безпосередньо в код, що викликав функцію.
Наприклад, створимо функцію sum, яка повертатиме суму двох чисел:
1. function sum (a, b) {
2. return a+b
3. }
4.
5. var test = sum (2, 5);
6. alert (test); // 7
Якщо потрібно повернути значення, можна використати директиву return. Дана
директива може бути розміщена будь-де функції. Коли ж управління
доходить до неї, функція завершується і потрібне значення передається до коду.